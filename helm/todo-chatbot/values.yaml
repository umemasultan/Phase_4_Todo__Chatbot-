# Default values for todo-chatbot
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Global settings
namespace: todo-chatbot

# Backend configuration
backend:
  replicaCount: 2
  image:
    repository: todo-chatbot/backend
    tag: latest
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 3000

  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "500m"

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  livenessProbe:
    httpGet:
      path: /api/health/liveness
      port: 3000
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

  readinessProbe:
    httpGet:
      path: /api/health/readiness
      port: 3000
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

# Frontend configuration
frontend:
  replicaCount: 2
  image:
    repository: todo-chatbot/frontend
    tag: latest
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 80

  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

  livenessProbe:
    httpGet:
      path: /health
      port: 80
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  readinessProbe:
    httpGet:
      path: /health
      port: 80
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

# PostgreSQL configuration
postgres:
  enabled: true
  image:
    repository: postgres
    tag: 16-alpine
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 5432

  persistence:
    enabled: true
    storageClass: standard
    size: 10Gi

  resources:
    requests:
      memory: "512Mi"
      cpu: "200m"
    limits:
      memory: "1Gi"
      cpu: "500m"

  database: todo_chatbot
  username: postgres

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  host: todo-chatbot.local
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
  tls:
    enabled: false

# Application configuration (ConfigMap)
config:
  nodeEnv: production
  logLevel: info
  jwtExpiresIn: 7d
  features:
    chatHistory: true
    aiSuggestions: true
    healthCheckClaude: false

# Secrets (should be overridden or created separately)
secrets:
  claudeApiKey: "REPLACE_WITH_YOUR_CLAUDE_API_KEY"
  jwtSecret: "REPLACE_WITH_GENERATED_SECRET"
  dbPassword: "REPLACE_WITH_SECURE_PASSWORD"
